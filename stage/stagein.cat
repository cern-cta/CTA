


STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



NNNNAAAAMMMMEEEE
     stagein - allocate space in a disk pool and copy files  from
     tape to disk or from disk to disk

SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
     ssssttttaaaaggggeeeeiiiinnnn [ ----AAAA _a_l_l_o_c_a_t_i_o_n__p_o_l_i_c_y ] [ ----bbbb _m_a_x__b_l_o_c_k__s_i_z_e ] [  ----CCCC
     _c_h_a_r_c_o_n_v  ]  [  ----dddd  _d_e_n_s_i_t_y  ]  [  ----EEEE  _e_r_r_o_r__a_c_t_i_o_n  ]  [ ----FFFF
     _r_e_c_o_r_d__f_o_r_m_a_t ] [ ----ffff _f_i_l_e__i_d ] [ ----GGGG ] [ ----gggg _d_e_v_i_c_e__g_r_o_u_p__n_a_m_e
     ]  [ ----hhhh _h_o_s_t ] [ ----IIII _e_x_t_e_r_n_a_l__f_i_l_e_n_a_m_e ] [ ----LLLL _r_e_c_o_r_d__l_e_n_g_t_h ]
     [ ----llll _l_a_b_e_l__t_y_p_e ] [ ----MMMM _h_s_m_f_i_l_e ] [ ----NNNN _n_r_e_a_d ] [ ----oooo  ]  [  ----pppp
     _p_o_o_l  ]  [ ----qqqq _f_i_l_e__s_e_q_u_e_n_c_e__n_u_m_b_e_r ] [ ----SSSS _t_a_p_e__s_e_r_v_e_r ] [ ----ssss
     _s_i_z_e  ]  [  ----TTTT  ]  [  ----UUUU  _f_u_n  ]  [   ----uuuu   _u_s_e_r   ]   [   ----VVVV
     _v_i_s_u_a_l__i_d_e_n_t_i_f_i_e_r(_s)  ]  [ ----vvvv _v_o_l_u_m_e__s_e_r_i_a_l__n_u_m_b_e_r(_s) ] [ ----XXXX
     _x_p_a_r_m ] [ ----zzzz ] [ _f_i_l_e_s ]

DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
     This command sends a request to a stage daemon which  checks
     its catalog.  If the file has already been staged, the cata-
     log is updated (number of accesses, last access time) and if
     _f_i_l_e  is  different  from  previous  job, a symbolic link is
     created and the control given back to the user.  If the file
     is  not staged yet, pools have been configured and ----pppp NNNNOOOOPPPPOOOOOOOOLLLL
     is not specified, the file is allocated in a pool  of  which
     the  space  is  managed by the stage daemon.  If the request
     gives tape parameters, the internal file name is in the form
     vvvviiiidddd....ffffsssseeeeqqqq....llllaaaabbbbeeeellll  while  if an external file name is specified
     with the option -I (disk stageing), the internal  file  name
     is  in  the  form xxxxffffiiiilllleeee____bbbbaaaasssseeeennnnaaaammmmeeee....rrrreeeeqqqqiiiidddd.  If no pool has been
     configured or ----pppp NNNNOOOOPPPPOOOOOOOOLLLL is specified,  the  tape  is  staged
     directly  in the location given by _f_i_l_e and no space manage-
     ment is done.  To do the actual copy, a  ttttpppprrrreeeeaaaadddd  is  issued.
     When  complete, if _f_i_l_e is specified, a symbolic link point-
     ing at the actual file is created with that name.

     _f_i_l_e may be a local path, the  combination  _m_a_c_h_i_n_e:_f_u_l_l_p_a_t_h
     (NFS  syntax),  a full path starting with the NFS_ROOT, i.e.
     /shift, or absent.

OOOOPPPPTTTTIIIIOOOONNNNSSSS
     ----AAAA _a_l_l_o_c_a_t_i_o_n__p_o_l_i_c_y
          Disk space allocation policy may be:

          iiiimmmmmmmmeeeeddddiiiiaaaatttteeee
               The disk space is  allocated  when  receiving  the
               stage request.  This is the default.

          ddddeeeeffffeeeerrrrrrrreeeedddd
               The disk space is allocated only when needed, i.e.
               one  file  at a time.  In case of multifile stage-
               ing, space is allocated for the  first  file,  the
               copy  from  tape to disk is done, the unused space
               is released; the  process  is  then  repeated  for



SunOS 5.5.1           Last change: 09/07/98                     1






STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



               every  tape  file requested and found on the tape.
               This mode increases the lifetime of files  in  the
               pool  and is very useful when files are of unknown
               size or vary a lot in size.

     ----bbbb _b_l_o_c_k_s_i_z_e
          Specifies the maximum block size.  If not given and the
          tape  is  labelled,  the  block  size is taken from the
          header label when the field  is  not  zero;  otherwise:
          for  all  drive  types  except  Redwoods the default is
          32760 if _l_r_e_c_l is not specified,  _l_r_e_c_l  otherwise.  On
          Redwoods,  the default is 262144 if _l_r_e_c_l is not speci-
          fied or the largest multiple of _l_r_e_c_l below 262144.

     ----CCCC _c_h_a_r_c_o_n_v
          The data is converted  from  this  character  set  when
          doing  the  copy.  _c_h_a_r_c_o_n_v may be aaaasssscccciiiiiiii (no conversion
          is done) or eeeebbbbccccddddiiiicccc.   The  option  value  may  also  be
          bbbblllloooocccckkkk.   In this case, the trailing blanks are stripped
          off and a newline is appended to each  record.   Option
          values  may be combined; they are separated by comma in
          this case.
          For example:
               -C ebcdic,block

     ----dddd _d_e_n_s_i_t_y
          1111666600000000 or 6666222255550000 for round  (IBM  3420)  tapes,  33338888000000000000  for
          standard  IBM 3480 cartridges, 33338888KKKKCCCC for 3480 cartridges
          with compaction (IDRC), 33338888KKKKDDDD  for  double  density  IBM
          3490 cartridges, 33338888KKKKDDDDCCCC for 3490 cartridges with compac-
          tion (IDRC), 8888222200000000, 8888555500000000 or 8888555500000000CCCC for Exabytes,  DDDDDDDDSSSS  or
          DDDDDDDDSSSSCCCC  for DAT cartridges, 2222GGGG, 6666GGGG, 11110000GGGG, 11110000GGGGCCCC, 22220000GGGG, 22220000GGGGCCCC,
          33335555GGGG or 33335555GGGGCCCC for DLT cartridges, 11110000GGGG  or  11110000GGGGCCCC  for  IBM
          3590  cartridges, 11110000GGGG, 11110000GGGGCCCC, 22225555GGGG, 22225555GGGGCCCC, 55550000GGGG or 55550000GGGGCCCC for
          Redwood cartridges.  It must  match  the  device  group
          specified  in TMS (if installed).  If this parameter is
          missing, the value is taken from TMS.

     ----EEEE _e_r_r_o_r__a_c_t_i_o_n
          Specifies the action to be taken in case of  tape  read
          error. This action may be:

          sssskkkkiiiipppp unreadable blocks are skipped. For each, an  error
               message  indicates  the  error  type and the block
               number.  A maximum of 10 blocks may be skipped.

          kkkkeeeeeeeepppp the file up to the block where the error  occurred
               is  kept  on  disk.  By  default, the disk file is
               removed.

          iiiiggggnnnnoooorrrreeeeeeeeooooiiii
               Do not take two consecutive tapemarks  as  End  Of



SunOS 5.5.1           Last change: 09/07/98                     2






STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



               Information.   This option is only valid for label
               type nnnnllll or bbbbllllpppp and should be avoided on  IBM  3420
               drives (the reel could wind off).

     ----FFFF _r_e_c_f_m
          Specifies the record format of the data on the tape. It
          may be one of the following:

          UUUU,,,,ffff77777777
               Blocks may be of unknown length. A single  logical
               record  on disk corresponds to one tape block. The
               disk copy of the file is  formatted  according  to
               the  convention for sequential FORTRAN unformatted
               I/O.

          UUUU    is an alias for UUUU,,,,ffff77777777.

          UUUU,,,,bbbbiiiinnnn
               Blocks may be  of  unknown  length.  The  data  is
               transferred  as  a  byte  stream.   This format is
               suitable for use with direct access Fortran unfor-
               matted I/O or C I/O.

          FFFF    Each tape block is exactly  _b_l_o_c_k_s_i_z_e  bytes  long
               (See the -b option) with the exception of the last
               block which may be shorter.  If both _b_l_o_c_k_s_i_z_e and
               _l_r_e_c_l are provided, they should be equal.
               Data is copied from tape to disk as  a  continuous
               data stream.  This format is suitable for use with
               direct access Fortran unformatted I/O or C I/O.

          FFFFBBBB   This allows to  group  several  records  of  _l_r_e_c_l
               bytes  into tape blocks of _b_l_k_s_i_z_e bytes.  _b_l_k_s_i_z_e
               must be a multiple of _l_r_e_c_l.

          FFFF,,,,----ffff77777777
               The tape file is known to be  formatted  according
               to the convention for sequential FORTRAN unformat-
               ted I/O. The control words  are  stripped  off  so
               that the disk file is suitable for use with direct
               access FORTRAN unformatted I/O or C I/O.  The log-
               ical   record   length   on  the  tape  file  must
               correspond to the record length  specified  either
               with  the  -L  option  or, if the -L option is not
               specified, the record length given in the label.

          If the tape is labelled, the  record  format  is  taken
          from the header label; otherwise the default is UUUU.

     ----ffff _f_i_d
          Specifies the fileid in HDR1. If more than  17  charac-
          ters  long,  only  the  last  17  are taken. It is then



SunOS 5.5.1           Last change: 09/07/98                     3






STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



          converted to upper case.  _f_i_d is  checked  against  the
          fid  in  HDR1.  In the case of multiple files, a series
          of file identifiers may be given,  separated  by  ":"s.
          These  apply  to the tape files in the specified order.
          If there are more files than identifiers, the last  one
          will  be  used  for all remaining files. Thus, a single
          file identifier may be given which applies to all files
          on the tape.

     ----GGGG    Specifies that the  tape  copy  operations  should  be
          issued on the tape server by the 'group user'. A 'group
          user' may be defined for each group in ////eeeettttcccc////sssshhhhiiiifffftttt....ccccoooonnnnffff....
          For example:
               GRPUSER ws     opalprod

     ----gggg _d_g_n
          Requests a device from an installation defined  set  of
          "device groups".  It must match the device group speci-
          fied in TMS (if installed).  If this parameter is miss-
          ing, the value is taken from TMS or defaults to CART.

     ----hhhh _h_o_s_t
          Sends the request to the stager on _h_o_s_t.  This may also
          be specified thru the environment variable STAGE_HOST.

     ----IIII _e_x_t_e_r_n_a_l__f_i_l_e_n_a_m_e
          Gives the name of an external disk file. In this  case,
          rrrrffffccccpppp is used to copy this file to the staging pool.

     ----LLLL _l_r_e_c_l
          Specifies the logical record length  for  fixed  length
          record format files.

     ----llll _l_a_b__t_y_p_e
          Specifies the type of label which should be checked  or
          generated. The following label types are supported:

          aaaallll   ANSI label

          bbbbllllpppp  bypass label processing

          nnnnllll   no label

          ssssllll   standard IBM label

          It must match the  label  type  specified  in  TMS  (if
          installed).  If this parameter is missing, the value is
          taken from TMS or defaults to ssssllll.

     ----MMMM _h_s_m_f_i_l_e
          Gives the name of a  file  stored  in  an  Hierarchical
          Storage  Manager  (HSM).  rrrrffffccccpppp is used to copy the file



SunOS 5.5.1           Last change: 09/07/98                     4






STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



          to the staging pool. The option ----ssss is not needed for  a
          complete file stageing: the stager queries the HSM sys-
          tem about the file size  and  allocates  correctly  the
          disk space in the pool.  Partial stageing is supported.

     ----NNNN _n_r_e_a_d
          If specified, only _n_r_e_a_d records will  be  copied.   In
          the  case  of  multiple files, a series of nread values
          may be given, separated by ":"s.  These  apply  to  the
          tape  files  in the specified order.  If there are more
          files than nread values, the last one will be used  for
          all  remaining files. Thus, a single nread value may be
          given which applies to all files on the tape.

     ----oooo    Implies old fileid. The existing fileid is checked  if
          the option ----ffff is also specified.

     ----pppp _p_o_o_l_n_a_m_e
          Allocates the file in the pool _p_o_o_l_n_a_m_e.  This may also
          be specified thru the environment variable STAGE_POOL.

     ----qqqq _f_s_e_q
          Specifies the  file  sequence  number(s)  of  the  tape
          file(s)  to be copied or created. Default is 1.  Multi-
          ple files may be specified using the following syntax:

          _f_1-_f_2           Files _f_1 to _f_2 inclusive.

          _f_1-             Files _f_1 to the last file on the tape.

          _f_1-_f_2,_f_4,_f_6-    A series of non-consecutive  ranges  of
                         files.

          uuuu              Position the tape by fid.

          uuuu_x             Position the tape by fid on _x  different
                         files.   A  series  of _x fileids must be
                         given as ----ffff option value.

     ----SSSS _s_e_r_v_e_r
          Specifies that the tape copy operation has to be issued
          on the tape server _s_e_r_v_e_r.

     ----ssss _s_i_z_e
          If specified, only _s_i_z_e Mbytes  will  be  copied.   The
          value  must  be  smaller  than 2048 (2 Gbytes).  In the
          case of multiple files, a series of size values may  be
          given, separated by ":"s. These apply to the tape files
          in the specified order.  If there are more  files  than
          size  values, the last one will be used for all remain-
          ing files. Thus, a single size value may be given which
          applies to all files on the tape.



SunOS 5.5.1           Last change: 09/07/98                     5






STAGEIN(l)        Misc. Reference Manual Pages         STAGEIN(l)



     ----TTTT    Does not check trailer labels.

     ----UUUU _f_u_n
          Fortran unit number.  This is internally converted to a
          local  path ffffttttnnnn_f_u_n (HP-UX) or ffffoooorrrrtttt...._f_u_n (all other plat-
          forms).  The ----UUUU option and the _f_i_l_e  parameter  may  be
          both specified for single file stageing only.

     ----uuuu _u_s_e_r
          A file allocated in a pool will be  stored  in  a  sub-
          directory  _u_s_e_r.   This  may also be specified thru the
          environment variable STAGE_USER.  The default subdirec-
          tory name is ssssttttaaaaggggeeee.  _u_s_e_r must be a valid user name and
          belong to the same group as the requestor.

     ----VVVV _v_i_d
          Specifies the tape VID if different from the VSN  .  In
          the  case of multi-volume files a series of _v_i_ds may be
          given, separated by ":"s, in the  order  in  which  the
          tapes are to be used.

     ----vvvv _v_s_n
          Specifies the volume serial number of the tape. In  the
          case  of  a  multi-volume  file a series of _v_s_ns may be
          given, separated by ":"s, in the  order  in  which  the
          tapes  are  to  be used.  When -v and -V are both used,
          each _v_s_n must be matched by a _v_i_d in the same order.

     ----zzzz    Gives on standard error, as an option string, the main
          characteristics  of  the  tape  file  just staged. This
          includes block size  (-b),  record  format  (-F),  file
          identifier  (-f),  record length (-L), full pathname of
          diskfile in the pool (-P) and file sequence  number  (-
          q).   The  line  is  prefixed by the string "STG47 - ".
          This flag is set by ccccooooppppyyyyttttaaaappppeeee.

EEEEXXXXAAAAMMMMPPPPLLLLEEEESSSS
     To get the data from a tape into the default stage pool:
          stagein -v CIN111 inp

RRRREEEETTTTUUUURRRRNNNN CCCCOOOODDDDEEEESSSS
     0    Ok.
     1    Bad parameter.
     2    System error.
     4    Configuration error.
     28   ENOSPC: unable to find enough disk space.
     192  Request cancelled by stageclr.
     193  Blocks were skipped.
     194  Blocks were skipped and stageing limited by size.
     195  Stagein stopped: too many tape errors, but -E keep.
     197  Stageing limited by size.




SunOS 5.5.1           Last change: 09/07/98                     6



