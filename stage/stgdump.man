.\" $Id: stgdump.man,v 1.4 2002/10/03 14:07:51 jdurand Exp $
.\"
.\" @(#)$RCSfile: stgdump.man,v $ $Revision: 1.4 $ $Date: 2002/10/03 14:07:51 $ CERN IT/DS/HSM Jean-Damien Durand
.\" Copyright (C) 2002 by CERN/IT/DS/HSM
.\" All rights reserved
.\"
.TH STGDUMP "1" "$Date: 2002/10/03 14:07:51 $" "CASTOR" "Stage Administrator Commands"
.SH NAME
stgdump \- Ask a stager deamon to dump its in\-memory catalog and save it in flat file format - for backup purpose
.SH SYNOPSIS
.B stgdump
[
.BI \-\-stghost_input " hostname"
] [
.BI \-\-stghost_output " hostname"
]
.BI \-\-stcp_output " stgcat_dump_filename"
.BI \-\-stpp_output " stgpath_dump_filename"
.SH DESCRIPTION
.LP
The
.B stgdump
command will dial with the stager daemon and will save in disk format the content of its catalog. Output files can be HSM filenames.
See the \fBEXAMPLES\fP section below. The flat-file version of the catalog is typically for a backup purpose. See
.B stgconvert
to know how to convert a flat-file catalog to a stager database one.
.SH OPTIONS
.RS
.B \-\-stghost_input
hostname
.RS
Host where is running a stager deamon that we will query the content.
.RE
.B \-\-stghost_output
hostname
.RS
Host where is running a stager deamon that we will use to store the result.
.RE
.B \-\-stcp_output
stgcat_dump_filename
.RS
Output file for the main catalog
.RE
.B \-\-stpp_output
stgpath_dump_filename
.RS
Output file for the link catalog
.RE

.SH EXAMPLE
.ft 3
.nf
.sp
stgdump \-\-stghost_input stagepublic \-\-stghost_output stagebackup \-\-stcp_output /castor/cern.ch/c3/backup/default/2002/05/05/stgcat
.ft
.LP
.fi
will ask for a dump of in\-memory catalog of 'stagepublic' stager and use the 'stagebackup' one to store (and later migrate) the result.

.SH NOTES
If you wish to recover a catalog from a flat-file, you have to shutdown the stager, remove (or rename) the directory containing the stager catalog, typically /usr/spool/db/stage, and then use stgconvert tool and restart stager.
.br
Options \-\-stghost_input and \-\-stghost_output go together. You cannot specify one without specifying the other.
.SH SEE ALSO
\fBstgconvert\fP(1), \fBstgdaemon\fP(1), \fBstageshutdown\fP(1), \fBCdbserver\fP(1), 

.SH AUTHOR
\fBCASTOR\fP Team <castor.support@cern.ch>
