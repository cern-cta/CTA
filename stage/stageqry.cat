


STAGEQRY(l)       Misc. Reference Manual Pages        STAGEQRY(l)



NNNNAAAAMMMMEEEE
     stageqry - give the status of all staged tapes

SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
     ssssttttaaaaggggeeeeqqqqrrrryyyy [ ----aaaa ] [ ----hhhh _h_o_s_t ] [ ----LLLL ] [ ----llll ] [ ----PPPP ] [ ----pppp _p_o_o_l ]
     [  ----qqqq  _f_i_l_e__s_e_q_u_e_n_c_e__n_u_m_b_e_r(_s)  ]  [ ----SSSS ] [ ----TTTT ] [ ----uuuu ] [ ----VVVV
     _v_i_s_u_a_l__i_d_e_n_t_i_f_i_e_r(_s) ] [ ----xxxx ]

     ssssttttaaaaggggeeeeqqqqrrrryyyy [ ----aaaa ] [ ----ffff ] [ ----hhhh _h_o_s_t ] [ ----IIII _e_x_t_e_r_n_a_l__f_i_l_e_n_a_m_e  ]
     [ ----LLLL ] [ ----llll ] [ ----PPPP ] [ ----pppp _p_o_o_l ] [ ----SSSS ] [ ----uuuu ] [ ----xxxx ]

     ssssttttaaaaggggeeeeqqqqrrrryyyy [ ----aaaa ] [ ----ffff ] [ ----hhhh _h_o_s_t ] [  ----LLLL  ]  [  ----llll  ]  [  ----MMMM
     _h_s_m_f_i_l_e | _p_a_t_t_e_r_n ] [ ----PPPP ] [ ----pppp _p_o_o_l ] [ ----SSSS ] [ ----uuuu ] [ ----xxxx ]

     ssssttttaaaaggggeeeeqqqqrrrryyyy [ ----AAAA _p_a_t_t_e_r_n ] [ ----aaaa ] [ ----ffff ] [ ----hhhh _h_o_s_t ] [ ----LLLL  ]  [
     ----llll ] [ ----PPPP ] [ ----pppp _p_o_o_l ] [ ----SSSS ] [ ----uuuu ] [ ----xxxx ]

     ssssttttaaaaggggeeeeqqqqrrrryyyy [ ----hhhh _h_o_s_t ] [ ----pppp _p_o_o_l ] [ ----ssss ]

DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
     ssssttttaaaaggggeeeeqqqqrrrryyyy gives the status of all tapes which are  staged  or
     currently requested in tabular form:

     Vid  visual identifier.

     Fseq file sequence number.

     Lbl  label type:  aaaallll, nnnnllll, ssssllll or bbbbllllpppp.

     Recfm     record format:  FFFF, FFFFBBBB or UUUU.

     Lrecl     logical record length.

     Blksiz    maximum block size.

     State     current status:
          STAGEALLOC     space has been reserved with stagealloc

          STAGEIN   currently reading from tape to disk

          STAGEOUT  space has been reserved for stageout file

          STAGEWRT  currently copying from disk to tape

          WAITING_SPC    waiting for space

          to complete
          WAITING_REQ    waiting for the same request by  another  job

          STAGED    successfully staged to EOF

          STAGED_LSZ     successfully staged to specified size



SunOS 5.5.1           Last change: 09/07/98                     1






STAGEQRY(l)       Misc. Reference Manual Pages        STAGEQRY(l)



          STAGED_TPE     successfully staged but blocks were skipped

          PUT_FAILED     stageput failed

     Nbaccess number of requests for this disk file.

     Size actual size / requested size (in Mbytes).

OOOOPPPPTTTTIIIIOOOONNNNSSSS
     ----AAAA _p_a_t_t_e_r_n
          searches for files allocated with ssssttttaaaaggggeeeeaaaalllllllloooocccc and  whose
          name  matches the specified pattern.  ssssttttaaaaggggeeeeqqqqrrrryyyy treats a
          pattern as a basic regular expression which  should  be
          surrounded  by  single  quotes  to avoid unwanted shell
          substitutions.

     ----aaaa    gives the status for all  files.  If  this  option  is
          absent,  only  the files that belong to the requestor's
          group are displayed.

     ----ffff    gives on an extra line the full  external_filename  or
          the full HSM filename.

     ----hhhh _h_o_s_t
          sends the request to the stager on _h_o_s_t.  This may also
          be specified thru the environment variable STAGE_HOST.

     ----IIII _e_x_t_e_r_n_a_l__f_i_l_e_n_a_m_e
          prints the catalog entry corresponding to this external
          disk file.

     ----LLLL    gives the link name(s) for the selected files.

     ----llll    gives more details for each file: the login  name  and
          the  group  name  of the user who requested the initial
          stage operation, the creation date and the date of last
          access.

     ----MMMM _p_a_t_t_e_r_n
          searches in the stager catalog for HSM files whose name
          matches  the specified pattern.  ssssttttaaaaggggeeeeqqqqrrrryyyy treats a pat-
          tern as a basic regular expression which should be sur-
          rounded  by  single quotes to avoid unwanted shell sub-
          stitutions.

     ----PPPP    gives the  internal  path  name(s)  for  the  selected
          files.

     ----pppp _p_o_o_l_n_a_m_e
          restricts the query to a given pool.

     ----qqqq _f_i_l_e__s_e_q_u_e_n_c_e__n_u_m_b_e_r(_s)



SunOS 5.5.1           Last change: 09/07/98                     2






STAGEQRY(l)       Misc. Reference Manual Pages        STAGEQRY(l)



          restricts the search to files having the given sequence
          numbers.   Multiple  file  numbers  may be separated by
          commas or specified  as  a  range  using  the  dash  as
          separator.

     ----SSSS    gives on stdout a  list  of  staged  files  sorted  in
          ascending  order  of  last access time weighted by file
          size.
                  W = max (atime, mtime) - (86400 * log  (size  /
          1024))
          There are six fields per file:  date  of  last  access,
          time   of  last  access,  size  in  Mbytes,  number  of
          accesses, internal path and user path.

     ----ssss    gives statistics on pool utilization.

     ----TTTT    gives on standard output, as  an  option  string,  the
          main characteristics of a tape file. The information is
          taken from the header labels. This includes block  size
          (-b),  record  format  (-F),  file  identifier (-f) and
          record length (-L).

     ----uuuu    restricts the  query  to  files  that  belong  to  the
          requestor.

     ----VVVV _v_i_d(_s)
          restricts the search to files  corresponding  to  given
          vids.  Multiple vids will be separated by colons.

     ----xxxx    adds two columns to the output: they give the  request
          id and the internal pathname.

EEEEXXXXAAAAMMMMPPPPLLLLEEEESSSS
     stageqry
          Vid    Fseq Lbl Recfm Lrecl Blksiz State       Nbaccess
          Size    Pool
          CZ0134    1 al  U         *  32760 STAGED             3
          0.3/200  stagetest
          CZ0134    2 al  U         *  32760 STAGEIN            1
          0.0/200  stagetest

     stageqry -A '^MyDice'
          File name                          State       Nbaccess
          Size    Pool
          MyDice.sav                         STAGED             2
          0.2/1    stagetest

     stageqry -l
          Vid    Fseq Lbl Recfm Lrecl Blksiz State       Nbaccess
          Size    Pool
          CZ0134    1 al  U         *  32760 STAGED             3
          0.3/200  stagetest



SunOS 5.5.1           Last change: 09/07/98                     3






STAGEQRY(l)       Misc. Reference Manual Pages        STAGEQRY(l)



                         created  by   baud        c3    94/01/12
          17:54:45
                         last    access                  94/01/13
          07:18:28
          CZ0134    2 al  U         *  32760 STAGED             1
          0.6/200
                         created  by   baud        c3    94/01/13
          07:18:28
                         last    access                  94/01/13
          07:30:04

     stageqry -L
          shd02:/u4/c3/baud/SHIFT/stage/fort.41
          shd02:/u4/c3/baud/SHIFT/stage/xxx

     stageqry -M run1193.raw -f
          File name                            State       Nbacc.
          Size    Pool
          run1193.raw                         STAGED            1
          191.7/250  wa97_stage
           hpss1d01:/hpss/cern.ch/user/c/cdrna57/raw/1997/run1193.raw

     stageqry -P
          shd02:/stage/c3/stage/CZ0134.1.al
          shd02:/stage/c3/stage/CZ0134.2.al

     stageqry -S
          94/01/13         07:18:28             0.3             3
          shd02:/stage/c3/stage/CZ0134.1.al shd02:/tmp/fort.41

     stageqry -s
          POOL   stagetest   DEFSIZE   200    MINFREE    10    GC
          shd02:/usr/local/bin/stage_clean
                                        CAPACITY   492.00M   FREE
          476.39M ( 96.8%)
            shd02 /stage CAPACITY 492.00M FREE 476.39M ( 96.8%)

     stageqry -T
          -b 32760 -F U -f SOMEDATA -L 32760

RRRREEEETTTTUUUURRRRNNNN CCCCOOOODDDDEEEESSSS
     0    Ok.
     1    Bad parameter.
     2    System error.
     4    Configuration error.










SunOS 5.5.1           Last change: 09/07/98                     4



