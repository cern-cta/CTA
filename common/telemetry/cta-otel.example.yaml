# SPDX-FileCopyrightText: The OpenTelemetry Authors
# SPDX-FileCopyrightText: 2026 CERN
# SPDX-License-Identifier: Apache-2.0 AND GPL-3.0-or-later

# This file is an example file for configuring the OpenTelemetry SDK
# It was copied and modified accordingly from https://github.com/open-telemetry/opentelemetry-cpp/blob/main/examples/configuration/kitchen-sink.yaml

# The file format version.
# The yaml format is documented at
# https://github.com/open-telemetry/opentelemetry-configuration/tree/main/schema
file_format: "1.0-rc.1"
# Configure if the SDK is disabled or not.
# If omitted or null, false is used.
disabled: true
# Configure the log level of the internal logger used by the SDK.
# Note that all internal OTEL logs are passed into the CTA logger
# If omitted, info is used.
log_level: info

# Configure resource for all signals.
# If omitted, the default resource is used.
resource:
  # Configure resource attributes.
  # Entries must contain .name and .value, and may optionally include .type. If an entry's .type omitted or null, string is used.
  # The .value's type must match the .type. Values for .type include: string, bool, int, double, string_array, bool_array, int_array, double_array.
  # The below attributes are simply examples. It is highly recommended to manually populate the service.namespace accordingly
  attributes:
    - name: service.namespace
      value: mynamespace
      type: string
    - name: scheduler.namespace
      value: cephUser
      type: string
  # Configure resource attributes. Entries have lower priority than entries from .resource.attributes.
  # The value is a list of comma separated key-value pairs matching the format of OTEL_RESOURCE_ATTRIBUTES.
  # See https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/configuration/sdk-environment-variables.md#general-sdk-configuration for details.
  # If omitted or null, no resource attributes are added.
  # Internally, CTA generates the CTA_OTEL_RESOURCE_ATTRIBUTES env variable, which contains attributes such as service.name, service.version, service.instance.id and host.name.
  # In order to see these resource attributes, the attributes_list MUST reference CTA_OTEL_RESOURCE_ATTRIBUTES. Additional attributes can still be freely added.
  # If these attributes are not desired for whatever reason, then this can be omitted.
  attributes_list: "${CTA_OTEL_RESOURCE_ATTRIBUTES}"
  # Configure resource schema URL.
  # If omitted or null, no schema URL is used.
  schema_url: https://opentelemetry.io/schemas/1.16.0


# Configure meter provider.
# If omitted, a noop meter provider is used.
meter_provider:
  # Configure metric readers.
  readers:
    # Configure a periodic metric reader.
    - periodic:
        # Configure delay interval (in milliseconds) between start of two consecutive exports.
        # Value must be non-negative.
        # If omitted or null, 60000 is used.
        interval: 30000
        # Configure maximum allowed time (in milliseconds) to export data.
        # Value must be non-negative. A value of 0 indicates no limit (infinity).
        # If omitted or null, 30000 is used.
        timeout: 10000
        # Configure exporter.
        exporter:
          # Configure exporter to be OTLP with HTTP transport.
          otlp_http:
            # Configure endpoint, including the metric specific path.
            # If omitted or null, https://localhost:4318/v1/metrics is used.
            endpoint: https://localhost:4318/v1/metrics
            # Configure headers. Entries have lower priority than entries from .headers.
            # The value is a list of comma separated key-value pairs matching the format of OTEL_EXPORTER_OTLP_HEADERS.
            # See https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/exporter.md#configuration-options for details.
            # If omitted or null, no headers are added.
            # When using basic authorization, set this value to "Basic <base64(username:password)>" where <base64(username:password)> should be replaced accordingly.
            # It is also possible to pass in an environment variable here if preferred. E.g. "${OTEL_EXPORTER_AUTH_HEADER}"
            headers_list: "Authorization=Basic <base64(username:password)>"
            # Configure compression.
            # Values include: gzip, none.
            # If omitted or null, none is used.
            compression: none
            # Configure max time (in milliseconds) to wait for each export.
            # Value must be non-negative. A value of 0 indicates no limit (infinity).
            # If omitted or null, 10000 is used.
            timeout: 5000
            # Configure the encoding used for messages.
            # Values include: protobuf, json. Implementations may not support json.
            # If omitted or null, protobuf is used.
            encoding: protobuf
            # Configure temporality preference.
            # Values include: cumulative, delta, low_memory.
            # For behavior of values, see https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/metrics/sdk_exporters/otlp.md.
            # If omitted or null, cumulative is used.
            temporality_preference: cumulative
            # Configure default histogram aggregation.
            # Values include: explicit_bucket_histogram, base2_exponential_bucket_histogram.
            # For behavior of values, see https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/metrics/sdk_exporters/otlp.md.
            # If omitted or null, explicit_bucket_histogram is used.
            default_histogram_aggregation: explicit_bucket_histogram
