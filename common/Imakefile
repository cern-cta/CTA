COMM       @(#)Imakefile,v 1.52 2004/06/09 16:10:29 CERN IT-PDP/DM Jean-Philippe Baud
COMM
COMM  Copyright (C) 1990-2002 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM

COMM		Make common routines library

PATH_CONFIG = ShiftConfigFile
MAPPING = MappingFile
LOCHOSTSFILE = LocalHostsList
RTHOSTSFILE = RemoteHostsList
ADMINHOSTS = AdminHosts
SACCTFILE = SacctDir/sacct
WSACCTO = wsacct.o
NFSROOT0 = NfsRoot
CPPFLAGS += -DCTHREAD_DEBUG -DCPOOL_DEBUG -DPATH_CONFIG=\"$(PATH_CONFIG)\" -DLOCALHOSTSFILE=\"$(LOCHOSTSFILE)\" -DMAPPING_FILE=\"$(MAPPING)\" -DRTHOSTSFILE=\"$(RTHOSTSFILE)\" -DADMIN_HOSTS=\"$(ADMINHOSTS)\" -DACCTFILE=\"$(SACCTFILE)\" -DNFSROOT=\"$(NFSROOT0)\"

COMMONLIB_OBJS = $(SYSDEP_OBJS) \
		 compat.o getacct.o getacctent.o getconfent.o \
		 getfilep.o getifnam.o getuser.o log.o marshall.o \
		 readc.o remote.o \
		 serror.o setnetio.o socket.o solveln.o trace.o \
		 $(WSACCTO) ypgetacct.o ypgetacctent.o \
		 Cdlopen.o Cthread.o Csched.o Cglobals.o Cgrp.o Cmutex.o Cuuid.o \
		 Cdomainname.o Cnetdb.o Cpool.o Cpwd.o Cstrerror.o \
		 socket_timeout.o u64subr.o Cinitdaemon.o Cgetopt.o \
		 Cregexp.o Csetprocname.o Cexportconf.o Csnprintf.o util.o \
		 Csecloader.o castor1compat.o

ClientSharedLibraryTarget(castorcommon,$(COMMONLIB_OBJS),,-ldl)

LIBMANPAGE(getacct)
LIBMANPAGE(getacctent)
LIBMANPAGE(getconfent)
LIBMANPAGE(log)
LIBMANPAGE(netclose)
LIBMANPAGE(netread)
LIBMANPAGE(netwrite)
LIBMANPAGE(Cgetopt)
LIBMANPAGE(Cglobals)
LIBMANPAGE(Cgrp)
LIBMANPAGE(Cuuid)
LIBMANPAGE(Cmutex)
LIBMANPAGE(Cpool)
LIBMANPAGE(Cpwd)
LIBMANPAGE(Csched)
LIBMANPAGE(Csetprocname)
LIBMANPAGE(Cthread)
