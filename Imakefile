COMM       @(#)Imakefile,v 1.12 2002/11/28 06:54:12 CERN IT-PDP/DM Jean-Philippe Baud
COMM
COMM  Copyright (C) 1990-2002 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM

COMM		Make CASTOR libraries and executables

SUBDIRS = common dlf security upv ns rfio \
	  expert rmc rtcopy client tape vdqm vmgr \
	  hsmtools h castor config gridftp2 shlib clips test

clean: imakeclean
clobber: imakeclobber

purge: clobber
	find . -name Makefile -print | grep -v codeGeneration | xargs rm -f;	\
	find . -name Makefile.bak -print | grep -v codeGeneration | xargs rm -f

imakeclean:
	@(cd imake; $(MAKE) $(MFLAGS) -f Makefile.ini clean)
imakeclobber:
	@(cd imake; $(MAKE) $(MFLAGS) -f Makefile.ini clobber)

tar:
	@sh ./maketar.sh

sql:
	@sh ./makesql.sh

doxygen: tools/doxyconfig
	doxygen tools/doxyconfig

.PHONY : client installclient tape installtape

client: 
	GotoSubdirs(upv ns client rfio vdqm vmgr security)

installclient: checkDESTDIR checkVERSION client
	GotoSubdirs(upv ns client rfio vdqm vmgr castor common)

tape:
	GotoSubdirs(rmc tape rtcopy)

installtape: installclient tape
	GotoSubdirs(rmc tape rtcopy)

all: client tape

install: installtape
