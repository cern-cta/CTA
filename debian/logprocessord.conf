#-------------------------------------------------------------------------------
# General program settings
#-------------------------------------------------------------------------------
[main]
pid_file         = /var/run/logprocessord.pid
log_file         = /var/log/castor/logprocessord.log
plugin_path      = /usr/lib/log-processor
daemon_processes = dlf-syslog-to-db

#-------------------------------------------------------------------------------
# DLF Database settings
#-------------------------------------------------------------------------------
[dest-dlf-db]
module = DLF
class  = DLFDbDest

# The database connection string in the form <username>/<password>@<database>
# or a reference to a file containing the password
# e.g. file:///etc/castor/DLFCONFIG
#connection_string = file:///etc/castor/DLFCONFIG

# The maximum number of records to be inserted in one bulk operation
#bulk_count        = 5000

# The maximum amount of time to wait before inserting records into the database
#flush_interval    = 60

# The domain name that should be appended to all encountered hostnames
#domain_name       = cern.ch

#-------------------------------------------------------------------------------
# DLF source log file - from syslog
#-------------------------------------------------------------------------------
[source-dlf-log-file-syslog]
module = DLF
class  = DLFLogFile

# There are basically two types of input that the logprocessor operates on:
# files and pipes.

# If the type is set to 'file' then it treats the file specified by the path
# variable as the source for the messages. It reads the file treating each line
# as a separate message and parses it. When it reaches the end of the file it
# closes it and quits.

# If the type is set to 'pipe' then it blocks until new data is available in 
# the currently opened file.

# The 'seek' variable determines if it should find the end of the file and
# insert only the newly arriving messages, if set to false it also inserts the
# messages that are already in the file.

# The 'dynfiles' option specific if dynamic file names should be parsed. If
# set to false the pipe just processes the file specified by path. If set to
# true then the pipe processes the YYYY-MM-DD.log files stored in the directory
# defined by the path variable (YYYY denotes year, MM - month, and DD - day).
# It starts with the current date and changes the file it processes when there
# is no more data in the current one and the system date changes.

path     = /var/log/dlf/syslog.input
type     = pipe
dynfiles = false
seek     = true

#-------------------------------------------------------------------------------
# DLF processes
#-------------------------------------------------------------------------------
[process-dlf-syslog-to-db]
source      = dlf-log-file-syslog
destination = dlf-db
