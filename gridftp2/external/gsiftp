#
# /etc/xinetd.d/gsiftp
#
# description: globus gridftp server with CASTOR dsi
# for further reference: https://www.globus.org/toolkit/docs/development/4.1.3/data/gridftp/developer/gridftp-developer-config.html
#              
service gsiftp
{
        instances       = 100
        socket_type     = stream
        wait            = no
        user            = root
        env             += GLOBUS_LOCATION=/opt/globus
        env             += GLOBUS_TCP_PORT_RANGE=20000,21000
        env             += GLOBUS_TCP_SOURCE_RANGE=20000,21000
        env             += LD_LIBRARY_PATH=/opt/globus/lib
        env             += RFIO_USE_CASTOR_V2=YES
        #env             += STAGE_SVCCLASS=default
        env             += X509_USER_CERT=/etc/grid-security/castor-gridftp-dsi-ext/castor-gridftp-dsi-ext-cert.pem
        env             += X509_USER_KEY=/etc/grid-security/castor-gridftp-dsi-ext/castor-gridftp-dsi-ext-key.pem
        server          = /opt/globus/sbin/globus-gridftp-server
        server_args     = -i -Z /var/log/globus-gridftp.log -l /var/log/gridftp.log -d INFO -dsi CASTOR2ext -allowed-modules CASTOR2ext -control-idle-timeout 3600
        log_on_success  += DURATION
        nice            = 10
        disable         = no 
}
