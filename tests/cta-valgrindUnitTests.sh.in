#!/bin/bash
# exit from the script on any error.
set -e
/usr/bin/cta-unitTests

/usr/bin/cta-unitTests-multiProcess

valgrind @VALGRIND_OPTS@ --suppressions=/usr/share/cta-@CTA_VERSION@/unittest/valgrind.suppr         \
  /usr/bin/cta-unitTests

valgrind --tool=helgrind @HELGRIND_OPTS@                                                             \
  --suppressions=/usr/share/cta-@CTA_VERSION@/unittest/helgrind.suppr                                \
  /usr/bin/cta-unitTests

valgrind @VALGRIND_OPTS@ --suppressions=/usr/share/cta-@CTA_VERSION@/unittest/valgrind.suppr         \
  --child-silent-after-fork=yes /usr/bin/cta-unitTests-multiProcess

valgrind --tool=helgrind @HELGRIND_OPTS@                                                             \
  --suppressions=/usr/share/cta-@CTA_VERSION@/unittest/helgrind.suppr                                \
  /usr/bin/cta-unitTests-multiProcess
