.PS

copy "sequence.pic";

# Define the objects
object(G,"gateway");
object(V,"vdqm");
object(A,"aggregator");

step();

# Message sequences
active(G);
message(G,V,"connect");
active(V);
message(G,V,"volume request");
message(V,G,"ack");
message(V,G,"volReqID");
message(G,V,"ack");
message(G,V,"close connection");
inactive(V);
inactive(G);

step();

active(V);
message(V,A,"connect");
active(A);
message(V,A,"ClientInfo - job");
message(A,V,"RcpJobReply");
message(A,V,"close connection");
inactive(V);

step();

message(A,G,"connect");
active(G);
message(A,G,"VolumeRequest");
message(G,A,"Volume");
message(A,G,"close connection");
inactive(G);

step();

message(A,G,"connect");
active(G);
message(A,G,"FileToMigrateRequest");
message(G,A,"FileToMigrate");
message(A,G,"close connection");
inactive(G);

step();

message(A,G,"connect");
active(G);
message(A,G,"FileMigratedNotication");
message(G,A,"NotificationAcknowledge");
message(A,G,"close connection");
inactive(G);

step();

message(A,G,"connect");
active(G);
message(A,G,"FileToMigrateRequest");
message(G,A,"NoMoreFiles");
message(A,G,"close connection");
inactive(G);

step();

message(A,G,"connect");
active(G);
message(A,G,"EndNotication");
message(G,A,"NotificationAcknowledge");
message(A,G,"close connection");
inactive(G);

inactive(A);

complete(G);
complete(V);
complete(A);

.PE

