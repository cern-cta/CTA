COMM
COMM  Copyright (C) 2004 by CERN/IT/ADC
COMM  All rights reserved
COMM
COMM     @(#)$RCSfile: Imakefile,v $ $Revision: 1.10 $ $Date: 2009/08/18 09:42:59 $ CERN IT-ADC Vitaly Motyakov
COMM    Make expert programs.

LOGDIR = /var/log/castor
LOGFILE = $(LOGDIR)/expertd.log
EXPERT_CONFIG = ExpertConfigFile
CFLAGS = -I../h $(MTCCFLAGS) -DBIN=\"$(BIN)\" -DLOGFILE=\"$(LOGFILE)\" -DEXPERT_CONFIG=\"$(EXPERT_CONFIG)\"

DependsOnLibrary(common,castorcommon)
DependsOnLibrary(upv,castorupv)

EXPERTLIB_OBJS = send2expert.Osuf exp_api.Osuf
SharedLibraryTarget(castorexpert,$(EXPERTLIB_OBJS),$(DEPLIB),$(LIBS))

MakeDir($(LOGDIR),0755)
EXPERTD_OBJS = expertd.Osuf exp_procreq.Osuf sendrep.Osuf explogit.Osuf
EXPERTDEPLIB = SharedLibraryTargetName(castorexpert)
NormalProgramTarget(expertd,$(EXPERTD_OBJS),$(EXPERTDEPLIB) $(DEPLIB),$(LIBS) SharedLibraryTargetName(castorexpert),750)
LOGROTATE(castor-expert-server,..,install)
SYSCONFIG(expertd,install)
INITSCRIPT(expertd,install)
CONFIGFILE(EXP,..,install)

EXEMANPAGE(expert)
EXEMANPAGE(expertd)
LIBMANPAGE(expert_send_request)
LIBMANPAGE(expert_send_data)
LIBMANPAGE(expert_receive_data)
