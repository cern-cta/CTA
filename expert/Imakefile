COMM
COMM  Copyright (C) 2004 by CERN/IT/ADC
COMM  All rights reserved
COMM
COMM     @(#)$RCSfile: Imakefile,v $ $Revision: 1.7 $ $Date: 2008/11/26 14:51:57 $ CERN IT-ADC Vitaly Motyakov
COMM    Make expert programs.

SPOOL = ExpertSpool
LOGFILE = $(SPOOL)/log
EXPERT_CONFIG = ExpertConfigFile
EXPERT_HOST = ExpertHost
CFLAGS = -I../h $(MTCCFLAGS) -DBIN=\"$(BIN)\" -DEXPERT_HOST=\"$(EXPERT_HOST)\" -DLOGFILE=\"$(LOGFILE)\" -DEXPERT_CONFIG=\"$(EXPERT_CONFIG)\"

DependsOnLibrary(common,castorcommon)
DependsOnLibrary(upv,castorupv)

#if BuildExpertLibrary
EXPERTLIB_OBJS = send2expert.Osuf exp_api.Osuf
SharedLibraryTarget(castorexpert,$(EXPERTLIB_OBJS),$(DEPLIB),$(LIBS))
#endif

#if BuildExpertDaemon
MakeDir($(SPOOL),root,bin,0755)
EXPERTD_OBJS = expertd.Osuf exp_procreq.Osuf sendrep.Osuf explogit.Osuf
NormalProgramTarget(expertd,$(EXPERTD_OBJS),$(DEPLIB),$(LIBS) -L. -l castorexpert,root,bin,750)
#endif

EXEMANPAGE(expert)
EXEMANPAGE(expertd)
LIBMANPAGE(expert_send_request)
LIBMANPAGE(expert_send_data)
LIBMANPAGE(expert_receive_data)
