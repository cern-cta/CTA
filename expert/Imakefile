COMM
COMM  Copyright (C) 2004 by CERN/IT/ADC
COMM  All rights reserved
COMM
COMM     @(#)$RCSfile: Imakefile,v $ $Revision: 1.10 $ $Date: 2009/08/18 09:42:59 $ CERN IT-ADC Vitaly Motyakov
COMM    Make expert programs.

CPPFLAGS += -DEXPERTLOGFILE=ExpertLogFile -DEXPERT_CONFIG=ExpertConfigFile

DependsOnLibrary(common,castorcommon)
DependsOnLibrary(upv,castorupv)

EXPERTLIB_OBJS = send2expert.o exp_api.o
SharedLibraryTarget(castorexpert,$(EXPERTLIB_OBJS),,)

MakeDir(LogPath,0755)
EXPERTD_OBJS = expertd.o exp_procreq.o sendrep.o explogit.o
EXPERTDEPLIB = DepSharedLibraryTargetName(expert,castorexpert)
NormalProgramTarget(expertd,$(EXPERTD_OBJS),$(EXPERTDEPLIB),$(EXPERTDEPLIB),750)
LOGROTATE(castor-expert-server,install)
SYSCONFIG(expertd,install)
INITSCRIPT(expertd,install)
CONFIGFILE(EXP,install)

EXEMANPAGE(expert)
EXEMANPAGE(expertd)
LIBMANPAGE(expert_send_request)
LIBMANPAGE(expert_send_data)
LIBMANPAGE(expert_receive_data)
