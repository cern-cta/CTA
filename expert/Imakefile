COMM
COMM  Copyright (C) 2004 by CERN/IT/ADC
COMM  All rights reserved
COMM
COMM     @(#)$RCSfile: Imakefile,v $ $Revision: 1.8 $ $Date: 2009/01/09 14:42:28 $ CERN IT-ADC Vitaly Motyakov
COMM    Make expert programs.

SPOOL = /var/spool/expert
LOGFILE = $(SPOOL)/log
EXPERT_CONFIG = ExpertConfigFile
CFLAGS = -I../h $(MTCCFLAGS) -DBIN=\"$(BIN)\" -DLOGFILE=\"$(LOGFILE)\" -DEXPERT_CONFIG=\"$(EXPERT_CONFIG)\"

DependsOnLibrary(common,castorcommon)
DependsOnLibrary(upv,castorupv)

#if BuildExpertLibrary
EXPERTLIB_OBJS = send2expert.Osuf exp_api.Osuf
SharedLibraryTarget(castorexpert,$(EXPERTLIB_OBJS),$(DEPLIB),$(LIBS))
#endif

#if BuildExpertDaemon
MakeDir($(SPOOL),root,bin,0755)
EXPERTD_OBJS = expertd.Osuf exp_procreq.Osuf sendrep.Osuf explogit.Osuf
EXPERTDEPLIB = SharedLibraryTargetName(castorexpert)
NormalProgramTarget(expertd,$(EXPERTD_OBJS),$(EXPERTDEPLIB) $(DEPLIB),$(LIBS) -L. -l castorexpert,root,bin,750)
#endif

EXEMANPAGE(expert)
EXEMANPAGE(expertd)
LIBMANPAGE(expert_send_request)
LIBMANPAGE(expert_send_data)
LIBMANPAGE(expert_receive_data)
