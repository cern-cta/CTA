# Load the CTA SSI and OFS plugins
xrootd.fslib libXrdSsi.so libXrdCtaOfs.so

# Specify which paths should be routed to the OFS plugin
#
# The "old" cta command will continue to use OFS. The "new" eoscta_stub and
# cta_admin binaries use SSI.
#
# Y3Rh is the Base64 encoding of cta, so this string appears at the beginning
# of all cta admin commands
ssi.fspath /Y3Rh
# L3Vzci9iaW4vY3Rh is Base64 encoding of /usr/bin/cta which appears at the
# beginning of commands called from the EOS WFE bash script
ssi.fspath /L3Vzci9iaW4vY3Rh

# Load the SSI module
ssi.svclib libXrdSsiCta.so

# Use the security module
xrootd.seclib libXrdSec.so

# Protocol specification
# The xroot server process needs to be able to read the keytab file
#sec.protocol krb5 /etc/krb5.keytab.cta host/<host>@CERN.CH
#sec.protocol sss -s /var/spool/xrootd/.xrd/sss.keytab -c /tmp/sss.keytab
sec.protocol unix

# Only Kerberos 5 and sss are allowed
#sec.protbind * only sss
sec.protbind 172.17.0* only unix

# Export the SSI resource
all.export /ctafrontend nolock r/w

# Export the OFS resources, specified in ssi.fspath above.
#
# There can be more than one of these; anything that starts with the prefix
# will go to the the underlying file system. Note that this prefix cannot be
# a substring of '/ctafrontend', so it is not possible to simply export '/'.
all.export /Y3Rh
all.export /L3Vzci9iaW4vY3Rh

# Turn off asynchronous i/o
xrootd.async off

# Use a port other than 1094, already used by EOS xroot server
xrd.port 10955

