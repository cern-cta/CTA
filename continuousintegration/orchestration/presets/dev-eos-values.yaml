
global:
  # Note that the repository and tag are manually overriden by the create_instance script
  repository:
  tag:
  pullPolicy: IfNotPresent

  eos:
    instancename: ctaeos

  http:
    enabled: true
    # cern_tape_archive_ + instancename
    sitename: cern_tape_archive_ctaeos

  sssKeytab:
    # This secret is generated by the authentication chart
    secret: eos-sss-keytab

mgm:
  # Must match the authentication chart
  kerberos:
    enabled: true
    clientConfig:
      configMap: krb5-conf
    defaultRealm: TEST.CTA
    adminPrinc:
      name: root
      password: "defaultcipassword"

  tape:
    enabled: true
    wfe:
      endpoint: cta-frontend:10955
      resource: /ctafrontend
    taperestapi:
      sitename: cern-cta-ctaeosci

  # This ensures there is a service available for the MGM with the same name
  # As the disk instance
  instanceService:
    enabled: true

  # Liveness probes are disabled for all pods as we specifically do not want the pod to restart in case of an error for CI
  probes:
    liveness: false

  extraEnv:
  - name: LD_PRELOAD
    value: "/usr/lib64/libjemalloc.so.2"
  # For some reason EOS is on another time zone, so set this to CET
  - name: TZ
    value: "CET"

  # This is where the core dumps end up; this directory does not exist by default
  extraVolumes:
    volumeMounts:
      - name: varlog-tmp
        mountPath: /var/log/tmp
      - name: eos-grpc-keytab
        mountPath: /etc/cta/eos.grpc.keytab
        subPath: eos.grpc.keytab
    volumes:
      - name: varlog-tmp
        emptyDir: {}
      - name: eos-grpc-keytab
        configMap:
          name: eos-grpc-keytab

fst:
  replicaCount: 1

  # Needed for the gcd image when built from CI
  image:
    pullSecrets:
    - ctaregsecret
    - reg-ctageneric

  tape:
    enabled: true
    wfe:
      endpoint: cta-frontend:10955
      resource: /ctafrontend
    gcd:
      enabled: true

  probes:
    liveness: false

  extraEnv:
  - name: TZ
    value: "CET"

  extraVolumes:
    volumeMounts:
      - name: varlog-tmp
        mountPath: /var/log/tmp
    volumes:
      - name: varlog-tmp
        emptyDir: {}


qdb:
  replicaCount: 1
  extraEnv:
  - name: LD_PRELOAD
    value: "/usr/lib64/libjemalloc.so.2"
  - name: TZ
    value: "CET"

  probes:
    liveness: false
