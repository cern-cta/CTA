# Take care with increasing this number, as CTA has not been tested with multiple frontend replicas
# Increasing this will most likely not work as expected
replicaCount: 1

restAPI:
  enabled: true
  image:
    repository:
    tag:
  jwks:
    endpoint: http://auth-keycloak:8080/realms/master/protocol/openid-connect/certs
    expiration: 300

grpc:
  enabled: false
  port: 10956
  conf:
    numberOfThreads: 512
    catalogue:
      numberOfConnections: 10
      # Reduced value for test environment
      missingFileCopiesMinAgeSecs: 5

    frontend:
      archiveFileMaxSizeGb: 1000
      zeroLengthFilesForbidden: true
      zeroLengthFilesForbiddenVoExceptionList: ""
      # repackBufferUrl

    schedulerdb:
      numberOfThreads: 500
      threadStackSizeMb: 1
      disableRepackRequests: false
      disableUserRequests: false
      tapeCacheMaxAgeSecs: 1
      retrieveQueueCacheMaxAgeSecs: 1

    logger:
      logLevel: "INFO"
      logFormat: json

    tls:
      enabled: true
      serverKey: /etc/grpc-certs/key/server.key
      serverCert: /etc/grpc-certs/cert/server.crt
      caCert: ""

    jwtAuth:
      enabled: true
      jwksUri: http://auth-keycloak:8080/realms/master/protocol/openid-connect/certs


xrd:
  enabled: true
  port: 10955
  conf:
    catalogue:
      numberOfConnections: 10
      # Reduced value for test environment
      missingFileCopiesMinAgeSecs: 5

    frontend:
      archiveFileMaxSizeGb: 1000
      zeroLengthFilesForbidden: true
      zeroLengthFilesForbiddenVoExceptionList: ""

    schedulerdb:
      numberOfThreads: 500
      threadStackSizeMb: 1
      disableRepackRequests: false
      disableUserRequests: false
      tapeCacheMaxAgeSecs: 1
      retrieveQueueCacheMaxAgeSecs: 1

    logger:
      logLevel: "INFO"
      ssiLogLevel: "warning"

  keytab:
    secretName: cta-frontend-keytab
    subPath: cta-frontend.keytab

# Script to execute in the main container before starting the frontend service
preRun:
  enabled: false
  script: |
    #!/usr/bin/bash

# Script to execute in the main container after frontend exited
postRun:
  enabled: false
  script: |
    #!/usr/bin/bash

pod:
  extraSpec:
    terminationGracePeriodSeconds: 1

extraEnv:
  - name: LOG_LEVEL
    value: "DEBUG"


extraVolumes:
  volumes:
  volumeMounts:
