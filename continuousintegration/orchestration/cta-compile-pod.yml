apiVersion: v1
kind: Pod
metadata:
  name: compile
  labels:
    k8s-app: compile
spec:
  restartPolicy: Never
  containers:
  - name: cta-compile-pod
    image: gitlab-registry.cern.ch/cta/ctageneric:78673git921a9300
    stdin: true
    env:
    - name: MY_NAME
      valueFrom:
        fieldRef:
          fieldPath: metadata.name
    - name: MY_NAMESPACE
      valueFrom:
        fieldRef:
          fieldPath: metadata.namespace
    - name: INSTANCE_NAME
      value: "$(MY_NAMESPACE)"
    - name: SCHEMA_VERSION
      value: "SCHEMA_VERSION_VALUE"
    volumeMounts:
    - mountPath: /shared
      name: shared

  volumes:
  - name: shared
    hostPath:
      path: /opt/cta

  imagePullSecrets:
  - name: ctaregsecret
