COMM
COMM  Copyright (C) 1999-2003 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM
COMM       @(#)$RCSfile: Imakefile,v $ $Revision: 1.18 $ $Date: 2009/08/18 09:43:02 $ CERN IT-PDP/DM Jean-Philippe Baud

COMM    Make volume manager programs.

#if BuildSecureVmgr
CPPFLAGS += -DVMGRCSEC
AddLdFlags(-ldl)
#endif
CPPFLAGS += -DVMGRLOGFILE=VmgrLogFile -DVMGRCONFIG=VmgrConfigFile $(ORACLE_CPPFLAGS)

CommonDependsOnLibrary(ns,castorns)
CommonDependsOnLibrary(common,castorcommon)
CommonDependsOnLibrary(upv,castorupv)

MakeDir(LogPath,0755)
PROC(vmgr_oracle_ifce)
VMGRD_OBJS = vmgr_main.o vmgr_oracle_ifce.o vmgr_procreq.o sendrep.o vmgrlogit.o
ORALIBS= -L$(ORACLE_LIBDIR) -lclntsh
NormalProgramTarget(vmgrd,$(VMGRD_OBJS),,$(ORALIBS),750)
ADMMANPAGE(vmgrd)
LOGROTATE(castor-vmgr-server,install)
SYSCONFIG(vmgrd,install)
INITSCRIPT(vmgrd,install)
CONFIGFILE(VMGR,install)

VMGRLIB_OBJS = vmgr_apiinit.o vmgr_deletedenmap.o vmgr_deletedgnmap.o vmgr_deletelibrary.o vmgr_deletemodel.o vmgr_deletepool.o vmgr_deletetape.o vmgr_deltag.o vmgr_enterdenmap.o vmgr_enterdgnmap.o vmgr_enterlibrary.o vmgr_entermodel.o vmgr_enterpool.o vmgr_entertape.o vmgr_errmsg.o vmgr_gettag.o vmgr_gettape.o vmgr_listdenmap.o vmgr_listdgnmap.o vmgr_listlibrary.o vmgr_listmodel.o vmgr_listpool.o vmgr_listtape.o vmgr_modifylibrary.o vmgr_modifymodel.o vmgr_modifypool.o vmgr_modifytape.o vmgr_querylibrary.o vmgr_querymodel.o vmgr_querypool.o vmgr_querytape.o vmgr_reclaim.o vmgr_settag.o vmgr_tpmounted.o vmgr_updatetape.o send2vmgr.o vmgrcheck.o
ClientSharedLibraryTarget(castorvmgr,$(VMGRLIB_OBJS),,)

CLIENTLIBMANPAGE(vmgr_deletedenmap)
CLIENTLIBMANPAGE(vmgr_deletedgnmap)
CLIENTLIBMANPAGE(vmgr_deletelibrary)
CLIENTLIBMANPAGE(vmgr_deletemodel)
CLIENTLIBMANPAGE(vmgr_deletepool)
CLIENTLIBMANPAGE(vmgr_deletetape)
CLIENTLIBMANPAGE(vmgr_deltag)
CLIENTLIBMANPAGE(vmgr_enterdenmap)
CLIENTLIBMANPAGE(vmgr_enterdgnmap)
CLIENTLIBMANPAGE(vmgr_enterlibrary)
CLIENTLIBMANPAGE(vmgr_entermodel)
CLIENTLIBMANPAGE(vmgr_enterpool)
CLIENTLIBMANPAGE(vmgr_entertape)
CLIENTLIBMANPAGE(vmgr_gettag)
CLIENTLIBMANPAGE(vmgr_gettape)
CLIENTLIBMANPAGE(vmgr_listdenmap)
CLIENTLIBMANPAGE(vmgr_listdgnmap)
CLIENTLIBMANPAGE(vmgr_listlibrary)
CLIENTLIBMANPAGE(vmgr_listmodel)
CLIENTLIBMANPAGE(vmgr_listpool)
CLIENTLIBMANPAGE(vmgr_listtape)
CLIENTLIBMANPAGE(vmgr_modifylibrary)
CLIENTLIBMANPAGE(vmgr_modifymodel)
CLIENTLIBMANPAGE(vmgr_modifypool)
CLIENTLIBMANPAGE(vmgr_modifytape)
CLIENTLIBMANPAGE(vmgr_querylibrary)
CLIENTLIBMANPAGE(vmgr_querymodel)
CLIENTLIBMANPAGE(vmgr_querypool)
CLIENTLIBMANPAGE(vmgr_querytape)
CLIENTLIBMANPAGE(vmgr_reclaim)
CLIENTLIBMANPAGE(vmgr_seterrbuf)
CLIENTLIBMANPAGE(vmgr_settag)
CLIENTLIBMANPAGE(vmgr_tpmounted)
CLIENTLIBMANPAGE(vmgr_updatetape)

VMGRLIB = DepSharedLibraryTargetName(vmgr,castorvmgr)
ClientProgramTarget(vmgrdeletedenmap,vmgrdeletedenmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeletedgnmap,vmgrdeletedgnmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeletelibrary,vmgrdeletelibrary.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeletemodel,vmgrdeletemodel.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeletepool,vmgrdeletepool.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeletetape,vmgrdeletetape.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrdeltag,vmgrdeltag.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrenterdenmap,vmgrenterdenmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrenterdgnmap,vmgrenterdgnmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrenterlibrary,vmgrenterlibrary.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrentermodel,vmgrentermodel.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrenterpool,vmgrenterpool.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrentertape,vmgrentertape.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrgettag,vmgrgettag.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlistdenmap,vmgrlistdenmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlistdgnmap,vmgrlistdgnmap.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlistlibrary,vmgrlistlibrary.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlistmodel,vmgrlistmodel.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlistpool,vmgrlistpool.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrlisttape,vmgrlisttape.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrmodifylibrary,vmgrmodifylibrary.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrmodifypool,vmgrmodifypool.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrmodifytape,vmgrmodifytape.o,$(VMGRLIB),$(VMGRLIB),755)
ClientProgramTarget(vmgrsettag,vmgrsettag.o,$(VMGRLIB),$(VMGRLIB),755)
CLIENTEXEMANPAGE(vmgrdeletedenmap)
CLIENTEXEMANPAGE(vmgrdeletedgnmap)
CLIENTEXEMANPAGE(vmgrdeletelibrary)
CLIENTEXEMANPAGE(vmgrdeletemodel)
CLIENTEXEMANPAGE(vmgrdeletepool)
CLIENTEXEMANPAGE(vmgrdeletetape)
CLIENTEXEMANPAGE(vmgrdeltag)
CLIENTEXEMANPAGE(vmgrenterdenmap)
CLIENTEXEMANPAGE(vmgrenterdgnmap)
CLIENTEXEMANPAGE(vmgrenterlibrary)
CLIENTEXEMANPAGE(vmgrentermodel)
CLIENTEXEMANPAGE(vmgrenterpool)
CLIENTEXEMANPAGE(vmgrentertape)
CLIENTEXEMANPAGE(vmgrgettag)
CLIENTEXEMANPAGE(vmgrlistdenmap)
CLIENTEXEMANPAGE(vmgrlistdgnmap)
CLIENTEXEMANPAGE(vmgrlistlibrary)
CLIENTEXEMANPAGE(vmgrlistmodel)
CLIENTEXEMANPAGE(vmgrlistpool)
CLIENTEXEMANPAGE(vmgrlisttape)
CLIENTEXEMANPAGE(vmgrmodifylibrary)
CLIENTEXEMANPAGE(vmgrmodifypool)
CLIENTEXEMANPAGE(vmgrmodifytape)
CLIENTEXEMANPAGE(vmgrsettag)
CLIENTEXEMANPAGE(vmgr)
