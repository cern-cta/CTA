.lf 1 dlf_init.man
.\" @(#)$RCSfile: dlf_init.man,v $ $Revision: 1.2 $ $Date: 2004/07/08 10:05:16 $ CERN IT-ADC Vitaly Motyakov
.\" Copyright (C) 2003 by CERN/IT/ADC
.\" All rights reserved
.\"
.TH DLF_INIT 3 "$Date: 2004/07/08 10:05:16 $" CASTOR "DLF Library Functions"
.SH NAME
dlf_init \- initialize DLF structures for subsequent
writing of the log messages
.SH SYNOPSIS
.br
\fB#include "dlf_api.h"\fR
.sp
.BI "int dlf_init (const char * " facility_name )
.SH DESCRIPTION
.B dlf_init
initializes DLF structures for subsequent writing of the log
messages. The function gets log destinations from the CASTOR common
configuration file /etc/shift.conf or from the 
environment variables and reads all facility specific
message texts from the DLF server, or from the supplied text file
when in standalone mode. The obtained information is then
stored in the global DLF structures.
.TP
.I facility_name
is the name of the calling facility. It must be at most
DLF_MAXFACNAMELEN characters long.
.LP
This function must be called
in the main thread prior to any other thread creation.
.SH RETURN VALUE
This function returns 0 (zero) if the operation was successful, 1 (one) if no log destinations
have been specified, or -1 otherwise.
.B serrno
is set appropriately.
.SH ERRORS
.TP 1.3i
.B ENOMEM
Memory could not be allocated.
.TP
.B SENOSHOST
Host unknown.
.TP
.B SENOSSERV
Service unknown.
.TP
.B SECOMERR
Communication error.
.TP
.B EDLFNACT
DLF server is not running or is being shutdown.
.SH SEE ALSO
.BR dlf_write(3)
.SH AUTHOR
\fBCASTOR\fP Team <castor.support@cern.ch>
