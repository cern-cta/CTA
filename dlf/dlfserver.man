.lf 1 dlfserver.man
.\" @(#)$RCSfile: dlfserver.man,v $ $Revision: 1.3 $ $Date: 2005/06/17 16:10:10 $ CERN IT-ADC Vitaly Motyakov
.\" Copyright (C) 2003 by CERN/IT/ADC
.\" All rights reserved
.\"
.TH DLFSERVER 1 "$Date: 2005/06/17 16:10:10 $" CASTOR "DLF Administrator Commands"
.SH NAME
dlfserver \- start the CASTOR Distributed Logging Facility server
.SH SYNOPSIS
.B dlfserver [options]

.SH DESCRIPTION
.LP
The
.B dlfserver
command starts the DLF server.
This command is usually executed at system startup time
.RB ( /etc/rc.local ).
This will read the DLF configuration file,
create a pool of threads and look for requests.
Each of them is processed in a thread which opens a connection to the
database server if necessary.
When a request has been completed, the thread becomes idle until it is allocated
to another request.
.SH OPTIONS
.TP 2.0i
.B "-t " number_of_threads
Number of threads - default is 6.

.SH NOTES
.LP
All error messages are kept in a log.
.LP
The DLF server listen port number can be defined on client hosts
and on the machine where the DLF server runs in either of the
following ways:
.RS
.LP
setting an environment variable DLF_PORT
.RS
.HP
setenv DLF_PORT 5035
.RE
.LP
an entry in
.B /etc/shift.conf
like:
.RS
.HP
DLF	PORT	5035
.RE
.LP
an entry in
.B /etc/services
like:
.RS
.HP
dlf           5035/tcp                        # CASTOR dlf
.RE
.RE
.LP
If none of these methods is used, the default port number is taken from the
definition of DLF_PORT in dlf_constants.h.
.LP
The DLF host name can be defined on client hosts
in either of the following ways:
.RS
.LP
setting an environment variable DLF_HOST, for example:
.RS
.HP
setenv DLF_HOST castordlf
.RE
.LP
an entry in
.B /etc/shift.conf
for example:
.RS
.HP
DLF	HOST	castordlf
.RE
.RE
.LP
If none of these methods is used, the default host is taken from the
definition of DlfHost in site.def.
.LP
The DLF database keeps the information about all CASTOR facilities,
their log messages' texts with the associated message numbers, and
log messages themselves.
When the DLF server is started for the first time, the database must be
initialized. 
.LP
The DLF configuration file contains password information for the
database and must be readable/writable only by root.
It contains a single line in the format:
.RS
.HP
username/password@serv
.RE
where 'username' and 'password' are the credentials to login to the database
instance identified by 'serv' which is the name of the server in case of MySQL,
or the name of the service in case of ORACLE.
.SH FILES
.TP 1.5i
.B /etc/DLFCONFIG
configuration file
.TP
.B /usr/spool/dlf/log
.fi
.SH SEE ALSO
.B dlfshutdown(1)
.SH AUTHOR
\fBCASTOR\fP Team <castor.support@cern.ch>
