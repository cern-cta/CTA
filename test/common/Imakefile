COMM       @(#)$RCSfile: Imakefile,v $ $Revision: 1.6 $ $Date: 2001/05/23 11:15:57 $ CERN IT-PDP/DM Jean-Philippe Baud
COMM
COMM  Copyright (C) 1999 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM

COMM		Make CASTOR tests for "common" directory

INCLUDES = FileName(FileName(..,..),h)
INCLUDESWIN32 = FileName(FileName(..,..),win32)

#ifndef _WIN32
DEBUG          = -g
#endif

COMM --------------------------
COMM Resume there ALL the flags
COMM --------------------------
CFLAGS         = $(MTCCFLAGS) -I$(INCLUDES) -I$(INCLUDESWIN32) $(DEBUG)
LDFLAGS        = $(MTLDFLAGS)

OBJS = Csched_test.Osuf tuxid.Osuf

#ifdef _WIN32
PROGS = ProgramTargetName(tuxid)
#else
PROGS = ProgramTargetName(Csched_test) ProgramTargetName(tuxid)
#endif

DEPLIBS = DepLibraryTargetName(FileName(..,common),common)

#ifdef _WIN32
SLIB          = advapi32.lib wsock32.lib mpr.lib
#else
#ifdef SOLARIS
COMM Because of h_errno external and POSIX4 library
SLIB         = -lnsl -lposix4
#else
#ifdef __osf__
SLIB         = -lrt
#endif
#endif
#endif

all: $(PROGS)

#ifndef _WIN32
NormalProgramTarget(Csched_test,Csched_test.Osuf,$(DEPLIBS),$(DEPLIBS) $(SLIB) $(ADNSLIB) $(MTLDLIBS))
#endif
NormalProgramTarget(tuxid,tuxid.Osuf,$(DEPLIBS),$(DEPLIBS) $(SLIB) $(ADNSLIB) $(MTLDLIBS))
MakeDepLibrary(FileName(..,common),common)

clean:
	-@RemoveFiles(FilesToClean)

clobber:        clean
	-@RemoveFiles($(PROGS))

#if _WIN32
depend:
	@echo Not supported on this platform
#else
depend:
	makedepend -Y$(INCLUDES) *.c 2> /dev/null
#endif

Makefiles:

FORCE:

COMM -------------------------
COMM DEPENDENCIES of *.c files
COMM -------------------------
COMM DO NOT DELETE THIS LINE -- make  depend  depends  on  it.
