.\" Copyright (C) 2005 by CERN IT/ADC
.\" All rights reserved
.\"
.TH DISKSERVER_QRY "1castor" "$Date: 2006/08/04 14:46:47 $" CASTOR "List files on a DiskServer"
.SH NAME
diskserver_qry
.SH SYNOPSIS
.B diskserver_qry
[
.B -h, 
.B --help
]
[
.B -i, 
.B --fileId
]
[
.B -d, 
.B --diskCopyId
]
diskServerName
.SH DESCRIPTION
.B diskserver_qry 
Lists the files on a given DiskServer and give their internal
status (fileid, diskCopyId, Status, physical file name and last known filename).
Note that the last known file name may be a number when not known that will actually
be the castorFile id.

.TP 20
.B \-h,\ \-\-help
Get usage information
.TP
.B \-i,\ \-\-fileId
Prints the castor fileId and HSM name of each file
.TP
.B \-d,\ \-\-diskCopyId
Prints the diskCopyId of each file
.LP
.B diskServerName
is the name of the disk server to be queried. It needs to be fully qualified.


.SH EXAMPLES
.BI #\ diskserver_qry\ lxfsrk60a05.cern.ch
.fi
Status               Physical FileName
.fi
DISKCOPY_VALID           lxfsrk60a05.cern.ch:/srv/castor/01/05/61263405@lxs5010.450
.fi
DISKCOPY_VALID_TOBEMIGR  lxfsrk60a05.cern.ch:/srv/castor/01/21/61270821@lxs5010.529
.fi
DISKCOPY_STAGEOUT        lxfsrk60a05.cern.ch:/srv/castor/01/46/61312846@lxs5010.718
.ft

.BI #\ diskserver_qry\ -id\ lxfsrk60a05.cern.ch
.fi
FileId     DiskCopyId   Status               Physical FileName                                  Last known FileName
.fi
61263405   450          DISKCOPY_VALID           lxfsrk60a05.cern.ch:/srv/castor/01/05/61263405@lxs5010.450    /castor/cern.ch/some/hsm/path
.fi
61270821   529          DISKCOPY_VALID_TOBEMIGR  lxfsrk60a05.cern.ch:/srv/castor/01/21/61270821@lxs5010.529    /castor/cern.ch/some/hsm/path
.fi
61312846   718          DISKCOPY_STAGEOUT        lxfsrk60a05.cern.ch:/srv/castor/01/46/61312846@lxs5010.718    /castor/cern.ch/some/hsm/path
.ft

.BI #\ diskserver_qry\ -id\ lxfsrk60a05
.fi
Unknown diskserver lxfsrk60a05. Did you provide a fully qualified name ?
.fi
.SH NOTES
Configuration for the database access is taken from /etc/castor/ORASTAGERCONFIG.

.SH SEE ALSO
.BR adminMultiInstance(1castor)

.SH AUTHOR
\fBCASTOR\fP Team <castor.support@cern.ch>
