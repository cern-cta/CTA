COMM
COMM  Copyright (C) 2000-2003 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM
COMM       @(#)Imakefile,v 1.24 2005/12/06 10:52:56 CERN IT-PDP/DM Jean-Philippe Baud

COMM    Make HSM admin tools.

CPPFLAGS += -DORAVDQMCONFIGFILE=VdqmConfigFile

DependsOnLibrary(common,castorcommon)
DependsOnLibrary(dlf,castordlf)
DependsOnLibrary(castor/db/cnv,castorcnvs)
DependsOnLibrary(ns,castorns)
DependsOnLibrary(castor,castorclient)
DependsOnLibrary(vmgr,castorvmgr)
DependsOnLibrary(rfio,castorrfio)

NormalProgramTarget(reclaim,reclaim.o,,,755)
NormalProgramTarget(adler32,adler32.o,,-lz,755)
NormalProgramTarget(c2probe,c2probe.o,,,755)
NormalProgramTarget(listPriority,listPriority.o,,-lstdc++,755)
NormalProgramTarget(enterPriority,enterPriority.o,,-lstdc++,755)
NormalProgramTarget(deletePriority,deletePriority.o,,-lstdc++,755)
LOCAL_PATH/rfcpupd.c: $(CASTOR_ROOT)/rfio/rfcp.c
	sed 's/| *O_TRUNC//' $< | sed 's/O_WRONLY/O_RDWR|O_APPEND/' > $@
PREFIX(FilesToClean) += LOCAL_PATH/rfcpupd.c
COMPILEC(rfcpupd.c,-DSACCT $(STAGERSUPERUSER) $(STAGERSUPERGROUP))
NormalProgramTarget(rfcpupd,rfcpupd.o,,,755)
NormalProgramTarget(stager_actualget,stager_actualget.o,,,755)
NormalProgramTarget(stager_actualput,stager_actualput.o,,,755)

NormalProgramTarget(vdqmDBInit,vdqmDBInit.o,,-lstdc++,755)

InstallTarget(enterfileclass,755)
InstallTarget(deletefileclass,755)
InstallTarget(printfileclass,755)

InstallTarget(entersvcclass,755)
InstallTarget(modifysvcclass,755)
InstallTarget(deletesvcclass,755)
InstallTarget(printsvcclass,755)

InstallTarget(printtapestatesummary,755)

InstallTarget(enterdiskpool,755)
InstallTarget(deletediskpool,755)
InstallTarget(printdiskpool,755)

InstallTarget(entertapepool,755)
InstallTarget(modifytapepool,755)
InstallTarget(deletetapepool,755)
InstallTarget(printtapepool,755)

InstallTarget(entermigrationroute,755)
InstallTarget(modifymigrationroute,755)
InstallTarget(deletemigrationroute,755)
InstallTarget(printmigrationroute,755)

InstallTarget(fixFileSize,755)
InstallTarget(cleanLostFiles,755)
InstallTarget(diskServer_qry,755)
InstallTarget(moveDiskServer,755)
InstallTarget(checkreplicas,755)
InstallTarget(draindiskserver,755)
InstallTarget(migrateNewCopy,755)
InstallTarget(vdqmlistpriority,755)
InstallTarget(vdqmlistrequest,755)
InstallTarget(vdqmsetpriority,755)
InstallTarget(vdqmdeletepriority,755)

InstallNonExecFile(castor_tools.pm,$(PERL_LIBDIR),755)
InstallNonExecFile(castor_tools.py,$(PYTHON_LIBDIR),644)
InstallNonExecFile(dlf.py,$(PYTHON_LIBDIR),644)

EXEMANPAGE(enterfileclass)
EXEMANPAGE(deletefileclass)
EXEMANPAGE(printfileclass)

EXEMANPAGE(entersvcclass)
EXEMANPAGE(modifysvcclass)
EXEMANPAGE(deletesvcclass)
EXEMANPAGE(printsvcclass)

EXEMANPAGE(printtapestatesummary)

EXEMANPAGE(enterdiskpool)
EXEMANPAGE(deletediskpool)
EXEMANPAGE(printdiskpool)

EXEMANPAGE(entertapepool)
EXEMANPAGE(modifytapepool)
EXEMANPAGE(deletetapepool)
EXEMANPAGE(printtapepool)

EXEMANPAGE(entermigrationroute)
EXEMANPAGE(modifymigrationroute)
EXEMANPAGE(deletemigrationroute)
EXEMANPAGE(printmigrationroute)

EXEMANPAGE(reclaim)
EXEMANPAGE(cleanLostFiles)
EXEMANPAGE(diskServer_qry)
EXEMANPAGE(moveDiskServer)
EXEMANPAGE(c2probe)
EXEMANPAGE(adler32)
EXEMANPAGE(adminMultiInstance)
EXEMANPAGE(listPriority)
EXEMANPAGE(enterPriority)
EXEMANPAGE(deletePriority)
EXEMANPAGE(draindiskserver)
EXEMANPAGE(migrateNewCopy)

EXEMANPAGE(vdqmDBInit)
EXEMANPAGE(vdqmsetpriority)
EXEMANPAGE(vdqmdeletepriority)
EXEMANPAGE(vdqmlistpriority)
EXEMANPAGE(vdqmlistrequest)
