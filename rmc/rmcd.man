.\" Copyright (C) 2002 by CERN/IT/PDP/DM
.\" All rights reserved
.\"
.TH RMCD "8castor" "$Date: 2009/08/18 09:43:01 $" CASTOR "rmc Administrator Commands"
.SH NAME
rmcd \- start the Remote Media Changer daemon
.SH SYNOPSIS
.B rmcd [OPTIONS]
.SH DESCRIPTION
.LP
The
.B rmcd
command starts the Remote Media Changer daemon.
.SH OPTIONS
.TP
\fB\-f
Remain in the foreground.
.SH CASTOR CONFIGURATION PARAMETERS READ BY THE SERVER
The remote media changer daemon reads and uses the following CASTOR
configuration parameters which are specified within the CASTOR
configuration file /etc/castor/castor.conf.
.TP
\fBRMC MODE
The compatibility mode of the the remote media-changer daemon.  Valid values
are ACS, MOCK and SMC.  A remote media-changer daemon can either be configured
to work with an ACS compatible tape library or with a SCSI compatible tape
library.  In addition a remote media-changer daemon can be configured to run
in MOCK mode for debugging purposes.  In MOCK mode a remote media-changer will
do nothing but log the client requests it receives.  It is \fBNOT\f[]
recommended to run a remote media-changer daemon in MOCK mode in production
unless you really know what you are doing.
.TP
\fBRMC PORT
The port on which the remote media changer daemon will listen for client
requests.  The default value is 5014.  This configuration parameter should
\fBNOT\fP normally be set and the default should be used.
.TP
\fBRMC SMCDEV
The path to the device file representing the SCSI media changer.  This
configuration parameter is only read by a remote media-changer daemon
configured to run in SMC compatibility mode. See \fBRMC MODE\f[] above.

.SH CASTOR CONFIGURATION PARAMETERS READ BY THE CLIENTS
The clients of the remote media changer daemon read and use the following
CASTOR configuration parameters which are specified within the CASTOR
configuration file /etc/castor/castor.conf.
.TP
\fBRMC HOST
The host on which the rmcd daemon is running and listening for client requests.
.TP
\fBRMC PORT
The port on which the remote media changer daemon will listen for client
requests.  The default value is 5014.  This configuration parameter should
\fBNOT\fP normally be set and the default should be used.

.SH ENVIRONMENT VARIABLES READ BY THE CLIENTS
The clients of the remote media changer daemon read and use the following
environment variables.  Please note that an environment variable will override
the equivalent CASTOR configuration parameter located within the CASTOR
configuration file /etc/castor/castor.conf.
.TP
\fBRMC_HOST
The same meaning as the CASTOR configuration parameter \fBRMC HOST\f[]
described above.
.TP
\fBRMC_PORT
The same meaning as the CASTOR configuration parameter \fBRMC PORT\f[] described
above.

.SH THE SERVER LOG FILE
.LP
All error messages and statistical information are written to the file
/var/log/castor/rmcd.log.  Each entry within the log has a timestamp.
For each user command there is one message RMC92 giving information about
the requestor (hostname, uid, gid) and one message RMC98 giving the command
itself.
The completion code of the command is also logged.
.SH FILES
.TP 1.5i
.B /var/log/castor/rmcd.log
.SH EXAMPLES
.TP
Here is a small log:
.nf
12/06 11:40:58  7971 rmc_srv_mount: RMC92 - mount request by 0,0 from tpsrv015.cern.ch
12/06 11:40:58  7971 rmc_srv_mount: RMC98 - mount 000029/0 on drive 2
12/06 11:41:08  7971 rmc_srv_mount: returns 0
12/06 11:42:43  7971 rmc_srv_unmount: RMC92 - unmount request by 0,0 from tpsrv015.cern.ch
12/06 11:42:43  7971 rmc_srv_unmount: RMC98 - unmount 000029 2 0
12/06 11:42:48  7971 rmc_srv_unmount: returns 0
.fi
.SH AUTHOR
\fBCASTOR\fP Team <castor.support@cern.ch>
