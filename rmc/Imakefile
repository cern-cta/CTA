COMM
COMM  Copyright (C) 2001-2002 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM

COMM 	Make SCSI media changer server programs.

COMM The rmcd daemon depends on libcastortape.so therefore include the rules to
COMM make it
include $(CASTOR_ROOT)/tape/Makefile

RMCD_DEPLIBS = DepSharedLibraryTargetName(tape,castortape)
RMCD_LIBS = $(RMCD_DEPLIBS) BuildRPathcastortape
RMCD_OBJS = \
  rmc_serv.o \
  rmc_procreq.o \
  rmc_logit.o \
  rmc_logreq.o \
  rmc_marshall_element.o \
  rmc_sendrep.o \
  rmc_smcsubr.o \
  rmc_send_scsi_cmd.o
TapeProgramTarget(rmcd,$(RMCD_OBJS),$(RMCD_DEPLIBS),$(RMCD_LIBS),755)
ADMMANPAGE(rmcd)
TapeMakeDir($(LOGPATH),0755)
LOGROTATE(castor-rmc-server,installtape)
SYSCONFIG(rmcd,installtape)
INITSCRIPT(rmcd,installtape)

CLIENTLIBMANPAGE(rmc_dismount)
CLIENTLIBMANPAGE(rmc_export)
CLIENTLIBMANPAGE(rmc_find_cartridge)
CLIENTLIBMANPAGE(rmc_get_geometry)
CLIENTLIBMANPAGE(rmc_import)
CLIENTLIBMANPAGE(rmc_mount)
CLIENTLIBMANPAGE(rmc_read_elem_status)
CLIENTLIBMANPAGE(rmc_seterrbuf)

COMM Both the rmc library and the smc command-line tool depend on
COMM libcastorcommon.so therefore include the rules to make it
include $(CASTOR_ROOT)/common/Makefile

RMCLIB_DEPLIBS = DepSharedLibraryTargetName(common,castorcommon)
RMCLIB_LIBS = $(RMCLIB_DEPLIBS)
RMCLIB_OBJS = rmc_dismount.o rmc_errmsg.o rmc_export.o rmc_find_cartridge.o rmc_get_geometry.o rmc_import.o rmc_mount.o rmc_read_elem_status.o send2rmc.o
TapeSharedLibraryTarget(castorrmc,$(RMCLIB_OBJS),$(RMCLIB_DEPLIBS),$(RMCLIB_LIBS))

SMC_DEPLIBS = DepSharedLibraryTargetName(common,castorcommon) DepSharedLibraryTargetName(rmc,castorrmc)
SMC_LIBS = $(SMC_DEPLIBS) BuildRPathcastorrmc
TapeProgramTarget(smc,smc.o,$(SMC_DEPLIBS),$(SMC_LIBS),6755)
EXEMANPAGE(smc)
