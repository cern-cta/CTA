COMM
COMM Imakefile,v 1.26 2005/10/17 11:38:52 CERN IT-PDP/DM Olof Barring
COMM

COMM
COMM Copyright (C) 1999-2001 by CERN/IT/PDP/DM
COMM  All rights reserved
COMM

COMM         Make RTCOPY server

#if BuildSecureRtcopy
CFLAGS += -DRTCOPYCSEC
AddLdFlags(-ldl)
#endif

CPPFLAGS += -DRTCOPY_LOGFILE=RtcpdLogFile -DNOMORETAPES=RtcpNoMoreTapes \
            -DWORKDIR=RtcpWorkDir -DNS_ROOT=NsRoot

CommonDependsOnLibrary(common,castorcommon)
CommonDependsOnLibrary(vmgr,castorvmgr)
CommonDependsOnLibrary(vdqm,castorvdqm)
CommonDependsOnLibrary(tape,castortape)
CommonDependsOnLibrary(tapebridge,castortapebridge)
CommonDependsOnLibrary(rfio,castorrfio)

MakeDir(RtcpBareWorkDir,777)
RTCPD_OBJS =	rtcpd.o rtcp_CallVMGR.o rtcp_CheckReq.o \
		rtcp_Listen.o rtcp_SendRecv.o rtcp_log.o \
		rtcpd_ClientListen.o rtcpd_Ctape.o rtcpd_Disk.o \
		rtcpd_MainCntl.o rtcpd_SelfMonitor.o rtcpd_Tape.o \
		rtcpd_TapeIO.o rtcp_InitNW.o \
		rtcpd_ConvertData.o \
		rtcpc_BuildReq.o rtcpapi.o rtcp_RetvalSHIFT.o \
		rtcpd_tpdump.o rtcp_accounting.o rtcp_recvRtcpHdr.o \
		rtcp_marshallVdqmClientInfoMsg.o \
		rtcpd_SendAckToVdqmOrTapeBridge.o \
		rtcpd_GetClientInfoMsg.o \
		rtcpd_GetClientInfo.o rtcp_tellClient.o \
		rtcpdIsConfiguredToReuseMount.o
TapeProgramTarget(rtcpd,$(RTCPD_OBJS),,-lz,0750)
EXEMANPAGE(rtcpd)
LOGROTATE(castor-rtcopy-server,installtape)
SYSCONFIG(rtcpd,installtape)
INITSCRIPT(rtcpd,installtape)
